document.addEventListener("DOMContentLoaded",(function(){pingServer_Start()}));var pingServerRunLock=!1,pingServerRunLock2=!1,pingServerLoaderLock=!1;function pingServer_Start(){if(!pingServerRunLock&&!pingServerRunLock2&&!pingServerLoaderLock){pingServerRunLock=!0,pingServerRunLock2=!0;const l={l:0,f:1,s:2,hf:3,hs:4};var e,n,r,t,o,i=getComputedStyle(document.querySelector("#pingServerView"));e=i.getPropertyValue("--pingServerState-loading"),n=i.getPropertyValue("--pingServerState-failed"),r=i.getPropertyValue("--pingServerState-succeed"),t=i.getPropertyValue("--pingServerState-halfFailed"),o=i.getPropertyValue("--pingServerState-succeed");var c=document.getElementById("pingServerLoader"),s=document.getElementById("pingServerText");function a(){pingServerLoaderLock=!0,c.addEventListener("animationiteration",(function e(){c.style.animationIterationCount=0,c.removeEventListener("animationiteration",e),pingServerLoaderLock=!1}))}function p(i){switch(i){case 0:pss=l.l,c.style.background=e,s.style.color=e,c.style.animation="pingServerLoader_loop 1s infinite forwards",s.innerText="正在检测服务器在线状态......";break;case 1:pss=l.hf,c.style.background=t,s.style.color=t,s.innerText="尝试用备用方案检测在线状态......";break;case 2:pss=l.hs,c.style.background=o,s.style.color=o,s.innerText="与MC服务器的连接正常";break;case 3:pss=l.s,c.style.background=r,s.style.color=r,s.innerText="Minecraft服务器在线";break;case 4:case 5:case 6:case 7:switch(pss=l.f,c.style.background=n,s.style.color=n,i){case 4:s.innerText="Minecraft服务器已离线";break;case 5:s.innerText="Minecraft服务器请求超时";break;case 6:s.innerText="在线状态检查失败，请稍后尝试";break;case 7:s.innerText="当前网络无法连接至MC服务器"}}}function g(e=null,n=null){null!=e?200==e.code?(p(3),document.getElementById("pingServerInfo_icon").src=e.img,document.getElementById("pingServerInfo_text_player").innerText="玩家数: "+e.players,document.getElementById("pingServerInfo_text_motd1").innerText=e.motd,document.getElementById("pingServerInfo_text_motd2").innerText=e.motd2,document.getElementById("pingServerInfo").style.display="flex",a()):pingServerRunLock||pss!=l.hf?pingServerRunLock?p(1):pss==l.hs&&a():(p(4),a()):pingServerRunLock||pss!=l.hf?pingServerRunLock?p(1):pss==l.hs&&a():(p("timeout"===n?5:6),a()),pingServerRunLock2=!1}p(0),$("#pingServerRootView").fadeIn(),new Ping({favicon:"/usePing.png",logError:!1,timeout:3e4}).ping("https://web.mjyy.top/minecraft/playerachievement/",(function(e){e?pingServerRunLock2||pss!=l.hf?p(1):(p(7),a()):s.style.color!=r&&(p(2),pingServerRunLock2||a()),pingServerRunLock=!1})),$.ajax({url:"https://proxy.cors.sh/https://uapis.cn/api/mcserver?server=113.219.237.106:30303",type:"GET",timeout:6e4,headers:{"X-Requested-With":"XMLHttpRequest","Access-Control-Allow-Origin":"*"},contentType:"application/json",success:function(e){g(e)},error:function(e){g(null,e)}})}}
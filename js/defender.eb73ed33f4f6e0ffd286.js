(()=>{"use strict";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(t){return new Promise((e=>{setTimeout(e,t)}))}t.r(e),t.d(e,{startGame_Click:()=>j,touchBottom_click:()=>I,touchLeft_click:()=>U,touchRight_click:()=>N,touchTop_click:()=>H});var n=function(t,e,o,n){return new(o||(o=Promise))((function(i,r){function f(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(f,s)}l((n=n.apply(t,e||[])).next())}))};function i(t){switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault(),p(t.key)}}window.onload=function(){document.getElementById("gameLoading").style.display="none",r=!0};let r=!1,f=!1,s=!1;function l(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function c(t){const e=h[0][t[1]],o=h[1][t[1]];return null==e||null==o||!l(e,o)||(h[0][t[1]]=null,h[1][t[1]]=null,!1)}const a=2,u=document.getElementById("player"),d=document.querySelector("#player .red");let y="null";function p(t){if(u&&M){switch(t){case"ArrowUp":{function e(){return n(this,arguments,void 0,(function*(t=0){t>0&&(yield o(t)),u&&(yield v(u.offsetTop-u.offsetHeight+24+12,u.offsetLeft-u.offsetWidth+24,-a,0,++m[0][0],[0,0]))}))}"ArrowUp"==y?(k("player-top-shoot .25s forwards"),e()):(k("player-top .5s forwards"),y="ArrowUp",e(250))}break;case"ArrowDown":{function i(){return n(this,arguments,void 0,(function*(t=0){t>0&&(yield o(t)),u&&v(u.offsetTop+24-12,u.offsetLeft+24-12,a,0,++m[0][1],[0,1])}))}"ArrowDown"==y?(k("player-bottom-shoot .25s forwards"),i()):(k("player-bottom .5s forwards"),y="ArrowDown",i(250))}break;case"ArrowLeft":{function r(){return n(this,arguments,void 0,(function*(t=0){t>0&&(yield o(t)),u&&v(u.offsetTop+24-12,u.offsetLeft-u.offsetWidth+24,0,-a,++m[0][2],[0,2])}))}"ArrowLeft"==y?(k("player-left-shoot .25s forwards"),r()):(k("player-left .5s forwards"),y="ArrowLeft",r(250))}break;case"ArrowRight":{function f(){return n(this,arguments,void 0,(function*(t=0){t>0&&(yield o(t)),u&&v(u.offsetTop-u.offsetHeight+24,u.offsetLeft+24-12,0,a,++m[0][3],[0,3])}))}"ArrowRight"==y?(k("player-right-shoot .25s forwards"),f()):(k("player-right .5s forwards"),y="ArrowRight",f(250))}break;default:return}D++<=0&&function(){n(this,void 0,void 0,(function*(){let t=D,e=0;for(;D>0;){if(D>=x&&M&&(M=!1),e>=B||!M){const n=10;let i=0,r=0;do{M||r>=B?M?(S(-C),d.offsetWidth):(S(-C,!1),i==Math.round(n/3)&&(T(),d.offsetWidth)):(r+=E,i==Math.round(n/3)&&d&&(d.style.opacity="1",d.offsetWidth)),t=D,M||i++>=n&&(d&&(d.style.opacity=(Number(d.style.opacity)/2).toString(),d.offsetWidth),i=0),yield o(E)}while(t==D&&!(D<=0));e=0}t==D?e+=P:(e=0,t=D),yield o(P)}M||(M=!0)}))}(),T()}}let w=function(){let t=[[0,0,0,0],[0,0,0,0]].map((t=>t.slice())),e=new Array(2).fill(0).map((()=>new Array(4).fill(0)));function o(){for(let o=0;o<t[1].length;o++)t[1][o]!=e[1][o]&&(_.value+=t[1][o]-e[1][o]);e=t.map((t=>t.slice()))}return{get value(){return{value:t.map((t=>t.slice())),setCell:(e,n,i)=>{t[e][n]=i,o()}}},set value(e){t=e.map((t=>t.slice())),o()},get lastValue(){return e}}}(),m=[[-1,-1,-1,-1],[-1,-1,-1,-1]];const h=[[new DOMRect,new DOMRect,new DOMRect,new DOMRect],[new DOMRect,new DOMRect,new DOMRect,new DOMRect]];function g(t,e,r,f,a){return n(this,arguments,void 0,(function*(t,e,n,r,f,a=0,d=0){for(h[f[0]][f[1]]=t.getBoundingClientRect();!(t.offsetTop>window.innerHeight&&(0==a||1==a)||t.offsetTop<-t.height&&(0==a||2==a)||t.offsetLeft>window.innerWidth&&(0==d||1==d)||t.offsetLeft<-t.width&&(0==d||2==d)||s);){if(r==w.value.value[f[0]][f[1]]){if(!c(f))break;h[f[0]][f[1]]=t.getBoundingClientRect(),1==f[0]&&u&&l(t.getBoundingClientRect(),u.getBoundingClientRect())&&(s=!0,window.removeEventListener("keydown",i),document.getElementById("gameOver").style.visibility="visible",u.style.animation="player-dead 100ms infinite",document.querySelector("#gameOver .game-over .button").focus())}t.style.top=`${t.offsetTop+e}px`,t.style.left=`${t.offsetLeft+n}px`,yield o(10)}w.value.setCell(f[0],f[1],w.value.value[f[0]][f[1]]+1)}))}function v(t,e,o,i,r,f){return n(this,void 0,void 0,(function*(){const n=document.createElement("img");n.style.top=t+"px",n.style.left=e+"px",n.src="https://s21.ax1x.com/2024/12/28/pAxP0P0.png",n.className="mjyy-projectile",document.body.appendChild(n),yield g(n,o,i,r,f),s||n.remove()}))}const b=2,L=800;function A(t,e,o,i,r,f,l,c){return n(this,void 0,void 0,(function*(){const n=document.createElement("img");n.style.top=t+"px",n.style.left=e+"px",n.src="https://s21.ax1x.com/2025/10/30/pVzCjtH.png",n.className="fire-charge",document.body.appendChild(n),yield g(n,o,i,l,c,r,f),s||n.remove()}))}document.addEventListener("DOMContentLoaded",(function(){}));let O=!1,R="null";function k(t){function e(){if(u){const t=getComputedStyle(u).transform;u.style.transform="none"===t?"unset":t,u.style.setProperty("--player_last-transform",t)}}u&&(O?(u.style.animationPlayState="paused",e()):u.addEventListener("animationend",(function(){e(),O=!1}),{once:!0}),R==t&&(u.style.animation="unset",u.offsetWidth),O=!0,u.style.animation=t,R=t)}let M=!0,D=0;function S(t,e=!0){D+=t,D<0&&(D=0),e&&T()}function T(){d&&(d.style.opacity=(D/x).toString())}const x=50,C=1,E=10,B=1e3,P=10,W=document.getElementById("score");let _=function(){let t=0;return{get value(){return t},set value(e){t=e,W&&(W.innerHTML=e.toString())}}}();function j(){!f&&r&&(f=!0,document.getElementById("gameStart").style.display="none",window.addEventListener("keydown",i),function(){n(this,void 0,void 0,(function*(){for(;!u;)yield o(100);for(;!s;){switch(Math.floor(4*Math.random())){case 0:A(-24,u.offsetLeft-u.offsetWidth+24,b,0,1,0,++m[1][0],[1,0]);break;case 1:A(window.innerHeight,u.offsetLeft+24-12,-b,0,2,0,++m[1][1],[1,1]);break;case 2:A(u.offsetTop+24-12,-24,0,b,0,1,++m[1][2],[1,2]);break;case 3:A(u.offsetTop-u.offsetHeight+24,window.innerWidth,0,-b,0,2,++m[1][3],[1,3])}yield o(L)}}))}())}function H(){s||p("ArrowUp")}function I(){s||p("ArrowDown")}function U(){s||p("ArrowLeft")}function N(){s||p("ArrowRight")}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("gameStart").focus()})),function(t){const e=window;for(const o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}(e)})();